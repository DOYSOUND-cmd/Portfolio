<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productions - DOYSOUND</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Helvetica:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="productions-page">
    <header>
        <div class="hero">
            <h1 id="animated-text">DOYSOUND</h1>
            <div class="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </div>
        <nav>
            <ul id="nav-menu">
                <li><a href="index.html#top">Home</a></li>
                <li><a href="./productions.html">Productions</a></li>
                <li><a href="Job.html">Job Career</a></li>
                <li><a href="index.html#about">About Me</a></li>
                <li><a href="index.html#skills">Technical Skills</a></li>
                <li><a href="index.html#qualifications">Qualifications</a></li>
            </ul>
        </nav>
        <div class="progress-container">
            <div class="progress-bar"></div>
        </div>
    </header>

    <main>
        <!-- 真空管エフェクター紹介セクション -->
        <section class="tube_effecter section">
            <div class="container">
                <h2>真空管クリーンブースター</h2>
                <div class="image-row">
                    <div class="guitar-image">
                        <img src="./photo/TubeEffector_exterior.jpg" alt="真空管クリーンブースターの画像">
                    </div>
                </div>
                <p>
                    真空管を用いたクリーンブースターを制作しました。<br>
                    このエフェクターの特徴は9Vで動作する点です。従来の真空管エフェクターは100V程度の<br>
                    高電圧で動作しますが、このエフェクターは低電圧で動作するため、ボードに組み込みやすくなっています。
                </p>
            </div>
        </section>

        <!-- 回路設計セクション -->
        <section class="circuit section">
            <div class="container">
                <h2>回路設計</h2>
                <div class="image-row">
                    <img src="./photo/TubeEffector_circuit.png" alt="回路図">
                </div>
                <div class="three-js-container">
                    <canvas id="myCanvas"></canvas>
                </div>
                <p>
                    KiCADを用いて回路図を作製しました。
                    真空管に関する知見は全くありませんでしたが、
                    <br>インターネット上の様々な情報を組み合わせて、設計を行いました。
                </p>
            </div>
        </section>

        <!-- ケース製作 -->
        <section class="armor section">
            <div class="container">
                <h2>ケース製作</h2>
                <div class="guitar-image">
                    <img src="./photo/TubeEffector_Process1.jpg" alt="外装" class="tall">
                    <img src="./photo/TubeEffector_Process2.jpg" alt="外装" class="tall">
                </div>
                <p>
                    一般的なアルミケースにボール盤で穴あけ加工を行って製作しました。<br>
                    その上から紺色のフェイクレザーを貼って高級感を演出しています。
                </p>
            </div>
        </section>

        <!-- 配線 -->
        <section class="wiring section">
            <div class="container">
                <h2>配線</h2>
                <div class="image-row">
                    <img src="./photo/TubeEffector_substrate.jpg" alt="ケース製作1">
                    <img src="./photo/TubeEffector_wiring.jpg" alt="ケース製作2">
                </div>
                <p>
                    製作した回路図からプリント基板を発注し、配線を行いました。<br>
                </p>
            </div>
        </section>

        <!-- 試奏動画セクション -->
        <section class="demo-video section">
            <div class="container">
                <h2>試奏動画</h2>
                <div class="video-container">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/4u2E2e-8ty4?si=1nFFWHFCgCdBIkIA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
            </div>
        </section>

        <!-- スペクトル画像セクション -->
        <section class="spectrum section">
            <div class="container">
                <h2>スペクトル解析</h2>
                <div class="image-row">
                    <img src="./photo/tube_off.png" alt="スペクトル画像1">
                    <img src="./photo/tube_on.png" alt="スペクトル画像2">
                </div>
                <p>
                    ギターから直接アンプに接続したときの音をスペクトル解析したもので、<br>
                    右側が今回製作した真空管エフェクターに接続したときの音を解析したものです。<br>
                    <br>中音域がより持ち上がっているのがお分かりいただけると思います。
                </p>
            </div>
        </section>
    </main>

    <footer>
        <p>Copyright © 2024 DOYSOUND All Rights Reserved.</p>
    </footer>
    
    <!-- Three.jsスクリプト -->
    <script src="https://unpkg.com/three@0.147.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.147.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://unpkg.com/three@0.147.0/examples/js/loaders/GLTFLoader.js"></script>
    <script>
        window.addEventListener("DOMContentLoaded", init);

        function init() {
            const canvasElement = document.querySelector('#myCanvas');
            const renderer = new THREE.WebGLRenderer({
                antialias: true,
                canvas: canvasElement,
                alpha: true,
            });
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;

            const width = canvasElement.clientWidth;
            const height = canvasElement.clientHeight;
            renderer.setSize(width, height);

            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x36393e);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.7);
            directionalLight.position.set(1500, 1100, 0);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 50000);
            const controls = new THREE.OrbitControls(camera, canvasElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.2;

            let mesh;
            const loader = new THREE.GLTFLoader();
            loader.load('./tube_effector.glb', function (gltf) {
                mesh = gltf.scene;
                mesh.scale.set(10.0, 10.0, 10.0);
                scene.add(mesh);

                const box = new THREE.Box3().setFromObject(mesh);
                const size = box.getSize(new THREE.Vector3());
                const center = box.getCenter(new THREE.Vector3());

                camera.position.copy(center);
                camera.position.z += size.length() * 1.5;
                controls.target.copy(center);
                controls.update();
            });

            let isRotating = true;
            canvasElement.addEventListener('mousedown', () => isRotating = !isRotating);

            function animate() {
                requestAnimationFrame(animate);
                if (mesh && isRotating) mesh.rotation.y -= 0.005;
                controls.update();
                renderer.render(scene, camera);
            }

            animate();
        }
    </script>
        <!-- スクリプトの読み込み -->
    <!-- Three.js本体 -->
    <script src="./js/three.min.js"></script>
    <!-- STLLoader -->
    <script src="./js/STLLoader.js"></script>
    <!-- TrackballControls -->
    <script src="./js/TrackballControls.js"></script>
    <!-- メインのJavaScriptコード -->
    <script src="script.js"></script>
</body>
</html>
